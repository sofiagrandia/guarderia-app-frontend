<div class="row border rounded">
  @if(centro){
  <div class="col-md-5">
    <div>
      <img [src]="centro.image" width="350" alt="" />

      <p>{{ centro.direccion }} {{ centro.plazasDisponibles }}</p>
    </div>
  </div>
  <div class="col-md-1 col-lg-1 d-none d-md-block">
    <div class="separador"></div>
  </div>
  <div class="d-block d-sm-none">
    <hr />
  </div>
  <div class="col-md-5">
    <form [formGroup]="form" action="" (ngSubmit)="enviar()">
      <div class="mb-3">
        <label class="form-label" for="">Fecha Entrada</label>
        <input formControlName="fechaIn" class="form-control" type="date" />
      </div>

      <div class="mb-3">
        <label class="form-label" for="">Fecha Salida</label>
        <input formControlName="fechaOut" class="form-control" type="date" />
      </div>

      <div>
        <p>
          ¿Tienes un código promocional?
          <a
            (click)="mostrarCodigoPromocional = !mostrarCodigoPromocional"
            class="btn btn-sm rounded-pill"
          >
            @if(mostrarCodigoPromocional){
            <i class="fa-solid fa-chevron-up"></i>
            }@else{
            <i class="fa-solid fa-chevron-down"></i>
            }
          </a>
        </p>
      </div>

      @if(mostrarCodigoPromocional){
      <div class="mb-3">
        <label class="form-label" for="">Código promocional</label>
        <div class="input-group mb-3">
          <input formControlName="codigoPromocional" class="form-control" />
          <button class="btn btn-outline-secondary" type="button">
            Validar
            <i class="fa fa-shopping-cart"></i>
          </button>
        </div>
      </div>
      }

      <div class="mb-3 p-4 bg-info text-white rounded">
        <div class="row">
          <div class="col-md-6">
            <span>Precio base</span>
          </div>
          <div class="col-md-6 text-end">
            <span>{{ centro.precioBase | divisa }}</span>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <span>Número de días</span>
          </div>
          <div class="col-md-6 text-end">
            <span>x {{ numDias }}</span>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6">
            <span>Descuento</span>
          </div>
          <div class="col-md-6 text-end">
            <span>{{ 0 }}%</span>
          </div>
        </div>
        <hr />

        <div class="col-md-6">
          <span>Elija los servicios que quiera añadir:</span>
        </div>

        @for(servicio of servicios ; track servicio){
        <div class="form-check form-switch">
          <input
            class="form-check-input"
            type="checkbox"
            role="switch"
            id="servicio-{{ servicio._id }}"
            (change)="onServiceToggle(servicio, $event)"
          />
          <label class="form-check-label" for="flexSwitchCheckDefault"
            >{{ servicio.titulo }} | + {{ servicio.precio | divisa }}</label
          >
        </div>
        }
        <div class="row">
          <div class="col-md-6">
            <h4>Total</h4>
          </div>
          <div class="col-md-6 text-end">
            <h4>{{ centro.precioBase * numDias + sumaServicios | divisa }}</h4>
          </div>
        </div>
      </div>

      @if(authService.user){
      <button class="btn btn-success">Reservar</button>
      }@else {
      <div class="alert alert-danger">
        <i class="fa fa-circle-exclamation me-3"></i>
        <a routerLink="/login">Inicia sesión</a> para continuar con la reserva
      </div>
      }
    </form>
  </div>
  }
</div>
